<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chatbot ‚Äì NeurText</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- HEADER -->
  <div class="header">
    <div class="container">
      <div class="logo-group">
        <img src="https://neurtext.ct.ws/wp-content/uploads/2025/05/logo-1.png" alt="NeurText logo">
        <span>NeurText</span>
      </div>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="chatbot.html">Gemini Chatbot</a>
        <a href="semantic-search.html">Semantic Search</a>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-content">
      <h1>Chiedi a Gemini ‚ú®</h1>
      <input type="text" id="question" placeholder="Scrivi una domanda...">
      <button onclick="askGemini()">Invia</button>
      <div class="response" id="responseBox"></div>
    </div>
  </section>

  <script>
    async function askGemini() {
      const questionInput = document.getElementById("question");
      const question = questionInput.value.trim();
      const responseBox = document.getElementById("responseBox");

      if (!question) {
        responseBox.innerHTML = "‚ö†Ô∏è Scrivi qualcosa prima di inviare.";
        return;
      }

      responseBox.innerHTML = "‚è≥ Attendi...";

      try {
        const res = await fetch("https://neurtext.onrender.com/api/gemini", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ question })
        });

        const data = await res.json();

        if (data.reply) {
          const formatted = data.reply.trim().replace(/\n/g, "<br>");
          responseBox.innerHTML = `${formatted}`;
          responseBox.scrollIntoView({ behavior: "smooth" });
          questionInput.value = "";
        } else {
          responseBox.innerHTML = "‚ùå Errore nella risposta.";
        }
      } catch (err) {
        console.error("ERRORE FETCH:", err);
        responseBox.innerHTML = "üö´ Errore di rete o server non disponibile.";
      }
    }
  </script>

</body>
</html>
